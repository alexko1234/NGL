@this()
@()

@import views.html.helper._
@form() = {

	@columnSearchForm{
		@formGroup{
			<div class="form-control" bt-select ng-model="searchService.form.projectCodes" multiple="true" textarea="true" filter="true" placeholder='@Messages("search.placeholder.projects")' bt-options="project.code as project|formatProjectListLabel for project in searchService.lists.getProjects()" ng-change="searchService.resetSampleCodes()"></div>			
		
		}
		@formGroup{
			<div class="form-control" bt-select ng-model="searchService.form.stateCodes" multiple="true" placeholder="@Messages("search.placeholder.states")" bt-options="state.code as state.name for state in searchService.states()"></div>			
		}								
						
	}
	@columnSearchForm{
		@formGroup{
			<div class="form-control" bt-select ng-model="searchService.form.sampleCodes" multiple="true" textarea="true" filter="true" placeholder='@Messages("search.placeholder.samples")' bt-options="sample.code as sample.code for sample in searchService.lists.getSamples()" ng-focus="searchService.refreshSamples()"></div>			
		
		}
		@formGroup{
			<div class="form-control" bt-select ng-model="searchService.form.validCode" placeholder="@Messages("search.placeholder.valid")" bt-options="valid.code as valid.name for valid in searchService.lists.getValuations()"></div>
		}
		
		
	}
	@columnSearchForm{
		@formGroup{					
			<input type="text" class="form-control" ng-model="searchService.form.regexCode" placeholder='@Messages("search.placeholder.regexCode")'>
			
		}
		
		@formGroup{	
			<input type="text" class="form-control" ng-model="searchService.form.analyseValuationUser" typeahead="analyseValuationUser.name as analyseValuationUser.name for analyseValuationUser in searchService.lists.getUsers() | filter:$viewValue | limitTo:20"  placeholder='@Messages("search.placeholder.analyseValuationUser")' title='@Messages("search.placeholder.analyseValuationUser")'>
		}
		
				
	}	
	@columnSearchForm{
		@formGroup{					
			<div class="form-control" bt-select ng-model="searchService.form.typeCodes" multiple="true" placeholder="@Messages("search.placeholder.types")" bt-options="type.code as type.name for type in searchService.lists.getTypes()"></div>			
		}
		
		@formGroup{	
			<div  class="form-control" bt-select ng-model="searchService.form.resolutionCodes" multiple="true" placeholder="@Messages("search.placeholder.resolutions")" bt-options="valid.code as valid.name group by valid.category.name for valid in searchService.lists.getResolutions()"></div>														
		}
				
	}	
	
	@columnSearchForm{
	}		
}

@buttons() = {
	<div class="form-control" bt-select ng-model="searchService.reportingConfigurationCode" ng-change="searchService.updateColumn()" placeholder="@Messages("search.placeholder.reporting.configuration")" bt-options="valid.code as valid.name for valid in searchService.lists.get('reportConfigs')" ng-if="searchService.lists.get('reportConfigs').length > 0"></div>
}

<div class="row"> 
	<div class="col-md-12 col-lg-12" ultimate-datatable="searchService.datatable">
		<div udt-form>	
			<div class="tab-content">
				<div class="tab-pane active" id="filters">
					<form class="well well-small">
						<div class="row">
						@form
						@columnSearchForm{
							@formGroup{
							<div class="btn-toolbar">
								<button type="submit" title='@Messages("button.search")' data-toggle="tooltip" ng-click="search()" class="btn btn-primary" >
									<i class="fa fa-search"></i>
								</button>
								<button title='@Messages("button.reset")' data-toggle="tooltip" ng-click="reset()"  class="btn btn-default">
									<i class="fa fa-undo"></i>
								</button>
															 	
							</div>	
							}	
							@formGroup{
								@buttons
							}
						}
						</div>		
					</form>	
				</div>
			</div>
		</div>
	</div>
</div> 

